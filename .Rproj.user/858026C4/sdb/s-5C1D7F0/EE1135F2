{
    "collab_server" : "",
    "contents" : "# load libraries\npackages=c(\"dplyr\",\"XML\",\"rvest\",\"stringr\",\"plyr\",\"xml2\",\"pryr\",\"lubridate\",\"readxl\",\"xlsx\",\n           \"rowr\",\"jpeg\",\"png\",\"RGtk2\",\"RSelenium\",\"gsubfn\",\"rPython\",\"magick\",\"openssl\",\"gWidgets2\")\npackage.check <- lapply(packages, FUN = function(x) {\n  if (!require(x, character.only = TRUE)) {\n    install.packages(x, dependencies = TRUE)\n    library(x, character.only = TRUE)\n  }\n})\n\n\nsource(\"Main.R\")\n#python.load(\"PyhtonScrapDataURI.py\")\n\n## layout - one page with 2 boxes\nw <- gwindow(\"Scraping and validating data\", visible=FALSE)\n\npg <- ggroup(cont=w)\n\npg$set_borderwidth(10L)\n\nlg <- gvbox(cont=pg)\n\nrg <- gvbox(cont=pg, expand=TRUE, fill=TRUE)\n\n\n## put main text widget and table widget into paned group so user can\n## adjust allocated space - 2 windows\npg <- gpanedgroup(cont=rg, expand=TRUE, horizontal=FALSE)\n\nfr <- gvbox(cont=pg, expand=TRUE, fill=TRUE, spacing=5)\n\nl <- glabel(gettext(\"Messages:\"), cont=fr, anchor=c(-1,0))\n\nfont(l) <- list(weight=\"bold\")\n\n#the style of a text in messages\noutputConsole <- gtext(\"\", wrap=FALSE,\n                       font.attr=list(family=\"monospace\"),\n                       container=fr, expand=TRUE, fill=TRUE)\n\nfr <- gvbox(cont=pg, expand=TRUE, fill=TRUE, spacing=5)\n\n## buttons in a button group\nbg <- ggroup(cont=rg)\n\naddSpring(bg)\n\nexecute_btn <- gbutton(\"execute\", cont=bg)\n\n\ncancel_btn <- gbutton(\"cancel\", cont=bg, handler=function(...) dispose(w))\n\n\n## use a form layout for ease in laying out the controls to adjust the\n## arguments for `read.table`\nflyt <- gformlayout(cont=lg)\n\naddSpring(lg)\n\n# choose country\ncountries <- c(\"Australia\"=\"Australia\", \"USA\"=\"USA\", \"Argentina\"=\"Argentina\")\n\ncountry <- gcombobox(names(countries), cont=flyt, label=\"Country\")\n\n# choose wheter only compare or also scrap and compare\nwhat <- gradio(c(\"scrap and compare\", \"only compare\"), horizontal=TRUE, \n               cont=flyt, label=\"Action\",\n               handler=function(h,...){\n                 if (svalue(what)==\"only compare\")\n                 {\n                   visible(bgl2)<-TRUE\n                   \n                 } else {visible(bgl2)<-FALSE}\n                     \n\n               })\n\n#validation file with new group, so user can hide button\nbgl1 <- ggroup(cont=flyt)\nfilev<- gfilebrowse(text = \"Select validation file\", type = \"open\",\n                   initial.dir = getwd(),\n                   filter=list(\"Excel\"=list(patterns=c(\"*.xls\",\"*.xlsx\"))),\n                   container = bgl1,\n                   handler=function(h,...){\n                   cat(svalue(filev))\n                   })\n\n#source file with new group, so user can hide button\nbgl2 <- ggroup(cont=flyt)\nfiles<- gfilebrowse(text = \"Select file with scraped data (County_online.xlsx)\", type = \"open\",\n                    initial.dir = getwd(),\n                    filter=list(\"Excel\"=list(patterns=c(\"*.xls\",\"*.xlsx\"))),\n                    container = bgl2\n                    )\n\n#init\nvisible(bgl2)<-FALSE\nsize(w) <- c(800, 400)\nvisible(w) <- TRUE\n\n\n#adding handler for execute button\naddHandlerChanged(execute_btn, handler=function(h,...) {\n\n  svalue(outputConsole)<-\"\"\n  \n  #checking if all requirements are met\n  if (svalue(what)==\"only compare\") {\n    \n    if (length(svalue(filev))==0 || length(svalue(files))==0)\n    {\n      galert(\"Make sure validation and online files are selected!\",parent=w)\n\n      \n    } else {execute(svalue(country),svalue(what),svalue(filev),svalue(files))} \n      \n  } else if (length(svalue(filev))==0) {\n    \n    galert(\"Make sure validation file is selected!\", parent=w)\n\n    \n    \n  } else {\n       execute(svalue(country),svalue(what),svalue(filev),svalue(files))}\n  \n  \n  \n})\n\n\n\n\n\n",
    "created" : 1505906178227.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3394435048",
    "id" : "EE1135F2",
    "lastKnownWriteTime" : 1506413492,
    "last_content_update" : 1506413492,
    "path" : "C:/Users/Godnov/Dropbox/Katarina/Init.R",
    "project_path" : "Init.R",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}